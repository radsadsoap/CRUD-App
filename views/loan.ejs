<%- include("dashboard") %>

<div class="px-10 p-4">
    <h1 class="text-7xl mb-6">Your Loans</h1>
    <% if (msg) { %>
    <div
        class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4"
        role="alert"
    >
        <span class="block sm:inline"><%= msg %></span>
    </div>
    <% } %>
    <a
        href="/addLoan"
        class="bg-black text-white font-bold py-2 px-4 rounded mb-4 inline-block"
    >
        Add Loan
    </a>
</div>

<div class="px-10">
    <table class="min-w-full bg-white">
        <tr class="bg-gray-800 text-white">
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Loan ID
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Name
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Loan Type
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Amount
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Interest Rate
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Tenure (Months)
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Total Amount
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Lender ID
            </th>
            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">
                Actions
            </th>
        </tr>
        <tbody class="text-gray-700">
            <% if (loans && loans.length > 0) { %> <% loans.forEach(loan => { %>
            <tr>
                <td class="text-left py-3 px-4"><%= loan.loan_id %></td>
                <td class="text-left py-3 px-4"><%= loan.name %></td>
                <td class="text-left py-3 px-4"><%= loan.loanType %></td>
                <td class="text-left py-3 px-4">
                    ₹<%= loan.amount.toFixed(2) %>
                </td>
                <td class="text-left py-3 px-4"><%= loan.interestRate %>%</td>
                <td class="text-left py-3 px-4"><%= loan.months %></td>
                <td class="text-left py-3 px-4">₹<%= loan.totalAmount %></td>
                <td class="text-left py-3 px-4"><%= loan.lender_id %></td>
                <td class="text-left py-3 px-4">
                    <a
                        href="/editLoan?id=<%= loan._id %>"
                        class="text-blue-500 hover:text-blue-700"
                        >Edit</a
                    >
                    |
                    <a
                        href="/deleteLoan?id=<%= loan._id %>"
                        class="text-red-500 hover:text-red-700"
                        onclick="return confirm('Are you sure you want to delete this loan?')"
                        >Delete</a
                    >
                </td>
            </tr>
            <% }); %> <% } else { %>
            <tr>
                <td colspan="9" class="text-center py-3 px-4">
                    No loans found
                </td>
            </tr>
            <% } %>
        </tbody>
    </table>
</div>
